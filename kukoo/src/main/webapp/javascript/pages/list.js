var list = [{
    //项目列表页（8）
    code: "", //项目代码
    id: "CA001", //项目id
    name: "加拿大联邦技术移民", //项目名称
    desc: '加拿大联邦技术移民项目是由加拿大联邦移民局直接受理的移民项目，联邦技术移民采用快速通道系统进行申请，具有名额充沛、无职业限制、无加拿大境内居住地要求、审理速度快等优点，最快可在8个月内办理成功并登陆加拿大。 同时，从申请条件上对语言水平等条件要求较高，通常适合学历高，年纪轻，英语好的申请人。', //项目简介
    details: "项目详情", //项目详情
    country: "加拿大", //国家
    countryId: "1", //国家代码
    type: "技术移民", //类别
    typeId: "1", //类别
    timespan: 8, //处理周期
    timespanUnit: "月", //处理周期 单位
    cost: 2.5, //费用
    costUnit: "万元", //费用单位
    //加拿大技术移民的费用在人民币2.5万左右（三口之家，主申本科学历，副申不做学历认证，汇率按5.0计算的情况下）
  }, {
    //项目列表页（6）
    code: "", //项目代码
    id: "CA002", //项目id
    name: "魁北克省技术移民", //项目名称
    desc: '该项目属于省提名移民项目；首先经魁省移民局审批获得省提名，再经联邦移民局进行健康及安全等审核。申请人须表明有意向居住在提名省份；获得永居身份后通常可迁徙至加拿大任意地区居住。该项目无职业限制，子女有额外加分，若申请人所学专业属于受训加分专业，则通常语言要求也较为宽松。但该项目需要抢名额，且处理周期相对长。', //项目简介
    details: "项目详情", //项目详情
    country: "加拿大", //国家
    countryId: "1", //国家代码
    type: "技术移民", //类别
    typeId: "1", //类别
    timespan: 36, //处理周期
    timespanUnit: "月", //处理周期 单位
    cost: 2.5, //费用
    costUnit: "万元", //费用单位
    //加拿大技术移民的费用在人民币2.5万左右（三口之家，主申本科学历，副申不做学历认证，汇率按5.0计算的情况下）

  }, {
    //项目列表页（4）
    code: "", //项目代码
    id: "CA003", //项目id
    name: "新斯科舍省技术移民", //项目名称
    desc: '该项目属于省提名移民项目；首先经新省移民局审批获得省提名，再经联邦移民局进行健康及安全等审核。申请人须表明有意向居住在提名省份；获得永居身份后通常可迁徙至加拿大任意地区居住。该项目采用快速通道系统进行申请，处理速度相对较快，但名额较少需要抢名额；同时，申请人职业须在新省紧缺职业列表上。', //项目简介
    details: "项目详情", //项目详情
    country: "加拿大", //国家
    countryId: "1", //国家代码
    type: "技术移民", //类别
    typeId: "1", //类别
    timespan: 9, //处理周期
    timespanUnit: "月", //处理周期 单位
    cost: 2.5, //费用
    costUnit: "万元", //费用单位）
    //加拿大技术移民的费用在人民币2.5万左右（三口之家，主申本科学历，副申不做学历认证，汇率按5.0计算的情况下
  }, {
    //项目列表页（7）
    code: "", //项目代码
    id: "CA004", //项目id
    name: "萨省技术移民", //项目名称
    desc: '该项目属于省提名移民项目；首先经萨省移民局审批获得省提名，再经联邦移民局进行健康及安全等审核。申请人须表明有意向居住在提名省份；获得永居身份后通常可迁徙至加拿大任意地区居住。该项目对年龄和语言要求宽松，处理速度较快，但需要抢名额；同时，申请人职业须在萨省紧缺职业，且部分职业需要萨省行业协会进行职业认证。', //项目简介
    details: "项目详情", //项目详情
    country: "加拿大", //国家
    countryId: "1", //国家代码
    type: "技术移民", //类别
    typeId: "1", //类别
    timespan: 24, //处理周期
    timespanUnit: "月", //处理周期 单位
    cost: 2.5, //费用
    costUnit: "万元", //费用单位
    //加拿大技术移民的费用在人民币2.5万左右（三口之家，主申本科学历，副申不做学历认证，汇率按5.0计算的情况下）
  }, {
    //项目列表页（5）
    code: "", //项目代码
    id: "CA005", //项目id
    name: "安大略省技术移民", //项目名称
    desc: '该项目属于省提名移民项目；首先经安省移民局审批获得省提名，再经联邦移民局进行健康、安全等审核。申请人须表明有意向居住在提名省份，获得永居身份后通常可迁徙至加拿大任意地区居住。该项目采用快速通道系统进行申请，需要被动接受邀请；审理速度相对较快，但通常不定期发邀请。同时要求申请人职业为安省非限制类职业。', //项目简介
    details: "项目详情", //项目详情
    country: "加拿大", //国家
    countryId: "1", //国家代码
    type: "技术移民", //类别
    typeId: "1", //类别
    timespan: 12, //处理周期
    timespanUnit: "月", //处理周期 单位
    cost: 2.5, //费用
    costUnit: "万元", //费用单位
    //加拿大技术移民的费用在人民币2.5万左右（三口之家，主申本科学历，副申不做学历认证，汇率按5.0计算的情况下）
  }, {
    //项目列表页（3）
    code: "", //项目代码
    id: "CA006", //项目id
    name: "新不伦瑞克省技术移民", //项目名称
    desc: '该项目属于省提名移民项目；首先经NB省移民局审批获得省提名，再经联邦移民局进行健康、安全等审核。申请人须表明有意向居住在提名省份；获得永居身份后通常可迁徙至加拿大任意地区居住。NB省技术移民项目不定期开放，申请人职业须在NB省紧缺职业列表上，且同时需要申请人最近两年内参加过NB省举办的移民交流会。', //项目简介
    details: "项目详情", //项目详情
    country: "加拿大", //国家
    countryId: "1", //国家代码
    type: "技术移民", //类别
    typeId: "1", //类别
    timespan: 12, //处理周期
    timespanUnit: "月", //处理周期 单位
    cost: 2.5, //费用
    costUnit: "万元", //费用单位
    //加拿大技术移民的费用在人民币2.5万左右（三口之家，主申本科学历，副申不做学历认证，汇率按5.0计算的情况下）

  }, {
    //项目列表页（1）
    code: "", //项目代码
    id: "AU001", //项目id
    name: "澳大利亚189独立技术移民", //项目名称
    desc: '澳大利亚 Skilled Independent Visa (Subclass 189) 俗称独立技术移民，不需要州担保、雇主以及亲属担保就可以申请，申请人职业须在MLTSSL列表上。申请189签证成功后，申请人及其家人可以作为永久居民去澳洲任何地方工作、学习、生活、加入医疗保险、担保亲属、申请澳大利亚国籍等。', //项目简介
    details: "项目详情", //项目详情
    country: "澳大利亚", //国家
    countryId: "2", //国家代码
    type: "技术移民", //类别
    typeId: "1", //类别
    timespan: 6, //处理周期
    timespanUnit: "月", //处理周期 单位
    cost: 7, //费用
    costUnit: "万元", //费用单位
    //澳洲技术移民的费用在人民币7万左右（三口之家，主申本科学历，副申交语言费，汇率按5.0计算的情况下）
  },
  {
    //项目列表页（2）
    code: "", //项目代码
    id: "AU002", //项目id
    name: "澳大利亚190州担保技术移民", //项目名称
    desc: '该项目属于州担保性质的移民签证。在申请澳洲189独立技术移民分数不够的情况下，通过申请州担保可加5分。申请人职业须在MLTSSL或者STSOL列表上（特殊职业除外），每个州政府有独立的担保职业列表，并且每年会调整。获签登陆后的前两年（累计两年）须在担保州定居，期间可回国或去澳洲其他州旅游。', //项目简介
    details: "项目详情", //项目详情
    country: "澳大利亚", //国家
    countryId: "2", //国家代码
    type: "技术移民", //类别
    typeId: "1", //类别
    timespan: 12, //处理周期
    timespanUnit: "月", //处理周期 单位
    cost: 7, //费用
    costUnit: "万元", //费用单位
    //澳洲技术移民的费用在人民币7万左右（三口之家，主申本科学历，副申交语言费，汇率按5.0计算的情况下）
  }

]

//国家
var country = [{
    key: "0",
    value: "全部"
  },
  {
    key: "1",
    value: "加拿大"
  },
  {
    key: "2",
    value: "澳大利亚"
  }
];


//项目类别：技术移民、投资移民、雇主担保移民
var projectType = [{
  key: "0",
  value: "全部"
}, {
  key: "1",
  value: "技术移民"
}, {
  key: "2",
  value: "投资移民"
}, {
  key: "3",
  value: "雇主担保移民"
}];


//周期
var timespan = [{
  key: "0",
  value: "全部"
}, {
  key: "1",
  value: "1年"
}, {
  key: "2",
  value: "2年"
}, {
  key: "3",
  value: "3年"
}, {
  key: "4",
  value: "4年"
}, {
  key: "5",
  value: "5年"
}];

$(function() {
  _app = new Vue({
    "el": '.main',
    "data": {
      "list1": list,
      "country": country,
      "projectType": projectType,
      "timespan": timespan,
      "selected": {
        "country": 0,
        "projectType": 0,
        "timespan": 0
      }
    },
    mounted: function() {
      for (var i = 0; i < this.list1.length; i++) {
        if (this.list1[i].desc.length > 140) {
          //this.list1[i].desc = this.list1[i].desc.substring(0, 140);
        }
        if (this.list1[i].cost < 50) {
          this.list1[i].cost_desc = "低";
        } else if (this.list1[i].cost < 150) {
          this.list1[i].cost_desc = "中";
        } else {
          this.list1[i].cost_desc = "高";
        }
      }
    },
    computed: {},
    methods: {
      search: function(e) {
        var t = $(e.target).parent().attr("t");
        var index = $(e.target).index();
        this.selected[t] = index;
        var _this = this;
        this.list = list.filter(function(cv, index, arr) {
          var mapping = {
            "country": "countryId",
            "projectType": "typeId",
            "timespan": "timespan"
          }
          var rv = [];
          for (var item in _this.selected) {
            var selIndex = _this.selected[item];
            if (selIndex != 0) {
              rv.push(_this[item][selIndex].key == cv[mapping[item]]);
            }
          }
          return rv.every(function(cv) {
            return cv;
          });
        });
      },
      toDetailpage: function(id) {
        window.open(BASEPATH + "detail/detail_" + id);
      },
      beforeEnter: function(el) {
        el.style.opacity = 0;
        el.style.marginLeft = "100%";
      },
      enter: function(el, done) {
        var delay = parseInt(el.dataset.index) * 500;
        setTimeout(function() {
          Velocity(
            el, {
              opacity: 1,
              marginLeft: 0
            }, {
              complete: done
            }
          )
        }, delay)
      },
      leave: function(el, done) {
        Velocity(
          el, {
            opacity: 0,
            marginLeft: "-100%"
          }, {
            complete: done
          }
        );
      }
    }
  });
});
